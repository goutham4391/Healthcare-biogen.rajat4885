window.CQ_Analytics||(window.CQ_Analytics={});
CQ_Analytics.storeData=function(a){var c=function(a,d){for(var b=0;b<CQ_Analytics.Sitecatalyst.frameworkMappings.length;b++){var c=CQ_Analytics.Sitecatalyst.frameworkMappings[b];if(c[a]===d)return c}return null},f=function(a){return"string"===typeof a?a.replace(/[,;=\|]/g,""):a},d;for(d in a)if("product"!==d){var b=d.indexOf(".");0<b&&d.substr(0,b-1);b=0<b?d.substr(b):d;CQ_Analytics.DataProvider.setItem("eventdata",b,a[d])}else{var e="category sku quantity price events evars".split(" "),h=CQ_Analytics.DataProvider.getItem("eventdata",
"products").split(",");h=""==h[0]?[]:h;for(var r=a[d]instanceof Array?a[d]:[a[d]],m=0;m<r.length;m++){var k=r[m],n=Array(6),g;for(g in k)if(b=e.indexOf(g),-1<b)if(4>b)n[b]=f(k[g]);else{var t=[],p;for(p in k[g]){var l=c("cqVar","eventdata."+d+"."+g+"."+p);if(l){t.push(l.scVar+"\x3d"+f(k[g][p]));var q=CQ_Analytics.DataProvider.getItem("eventdata","events").split("\u2026");0>q.indexOf(l.cqVar)&&(q.push(l.cqVar.replace(/.+\./,"")),CQ_Analytics.DataProvider.setItem("eventdata","events",q.join("\u2026")))}}n[b]=
t.join("|")}h.push(n.join(";"))}CQ_Analytics.DataProvider.setItem("eventdata","products",h.join(","))}};
CQ_Analytics.record=function(a){if(a.collect)return[a.event,a.values];if(a.event){a.options=a.options||{};try{CQ_Analytics.recordBeforeCallbacks.sort(function(a,b){return a.rank-b.rank});for(var c in CQ_Analytics.recordBeforeCallbacks)if(CQ_Analytics.recordBeforeCallbacks[c].func.call(this,a))return}catch(d){}CQ_Analytics.DataProvider.reset("eventdata");var f=a.event;"string"!==typeof a.event&&(f=a.event.join("\u2026"));CQ_Analytics.DataProvider.setItem("eventdata","events",f);a.values&&CQ_Analytics.storeData(a.values);
try{for(c in CQ_Analytics.recordAfterCallbacks.sort(function(a,b){return a.rank-b.rank}),CQ_Analytics.recordAfterCallbacks)if(CQ_Analytics.recordAfterCallbacks[c].func.call(this,a))break}catch(d){}}};CQ_Analytics.recordBeforeCallbacks=[];CQ_Analytics.recordAfterCallbacks=[];CQ_Analytics.registerBeforeCallback=function(a,c){CQ_Analytics.recordBeforeCallbacks.push({rank:c,func:a})};CQ_Analytics.registerAfterCallback=function(a,c){CQ_Analytics.recordAfterCallbacks.push({rank:c,func:a})};
function record(a,c,f,d,b){var e={};e.event=a;e.values=c;e.collect=f;e.options=d;e.componentPath=b;e.compatibility=!0;a=function(a){return function(b){a.call(this,b.event,b.values);return!1}};for(c=record.callbacks.length-1;0<=c;c--)CQ_Analytics.registerAfterCallback(a(record.callbacks[c]),150-c),record.callbacks.pop();return CQ_Analytics.record(e)}record.callbacks=[];