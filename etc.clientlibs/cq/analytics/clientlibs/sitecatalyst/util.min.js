Array.prototype.indexOf||(Array.prototype.indexOf=function(b,a){a=a||0;for(var c=this.length;a<c;a++)if(this[a]===b)return a;return-1});window.CQ_Analytics||(window.CQ_Analytics={});
CQ_Analytics.Sitecatalyst={events:[],trackVars:[],settings:[],hasEvent:function(b){if(CQ_Analytics.DataProvider.hasStore("eventdata"))for(var a=CQ_Analytics.DataProvider.getItem("eventdata","events").split("\u2026"),c=a.length;c--;)if(a[c]===b)return!0;return!1},setEvar:function(b){var a=b.scVar;b=b.cqVar;var c=a.match(/^product\./)||b.match(/product\./),d=CQ_Analytics.DataProvider.getStores(),e;for(e in d)try{eval("var "+e+" \x3d stores[store].data;")}catch(h){}if(this.hasEvent(b.replace(/.+\./,
"")))0>this.events.indexOf(a)&&(this.events.push(a),this.updateLinkTrackEvents());else if(""!=b)try{if(c)a.match(/^eVar\d+/)||(s.products=eval("eventdata.products"),0>this.trackVars.indexOf("products")&&this.trackVars.push("products"));else{var f=CQ_Analytics.DataProvider.replaceVariables(eval(b));if("undefined"!==typeof f){var g=a.replace("evar","eVar");s[g]=f;0>this.trackVars.indexOf(g)&&this.trackVars.push(g)}}}catch(h){console.log("Could not set "+a+": "+h)}},updateLinkTrackEvents:function(){s.events=
this.events.join(",");s.linkTrackEvents=s.events},updateLinkTrackVars:function(){s.linkTrackVars=this.trackVars.join(",")},eraseTrackVars:function(b){for(var a=0;a<this.trackVars.length;a++){var c=this.trackVars[a];"events"!==c&&(b&&(b[c]=s[c]),delete s[c])}this.trackVars=[]},saveEvars:function(){var b={events:this.events,trackVars:this.trackVars,linkTrackVars:s.linkTrackVars,linkTrackEvents:s.linkTrackEvents};this.events=[];this.eraseTrackVars(b);this.settings.push(b)},restoreEvars:function(){var b=
this.settings.pop();this.events=b.events;delete b.events;this.trackVars=b.trackVars;delete b.trackVars;this.updateLinkTrackEvents();this.eraseTrackVars();for(var a in b)s[a]=b[a]},stopTrackingTemporarily:function(){var b={trackDownloadLinks:s.trackDownloadLinks,trackExternalLinks:s.trackExternalLinks};s.trackDownloadLinks=!1;s.trackExternalLinks=!1;setTimeout(function(){for(var a in b)s[a]=b[a]},200)},trackLink:function(b){var a=b.options.obj,c=a&&a.href?a:!0;a=a&&a.name?a.name:"";var d=b.options.defaultLinkType||
"o",e=c&&c.href&&s.lt?s.lt(c.href):"",f=b.options.variableOverrides||null,g=b.options.doneAction||null;""===e&&(e=d);a=a||b.options.linkName||"default-link-name";(b=s.tl(c,e,a,f,g))&&document.write(b);this.stopTrackingTemporarily()},customTrack:function(b){var a=b.getAttribute("adhocevents")||"",c=b.getAttribute("adhocevars")||"";if(a||c){var d=CQ_Analytics.DataProvider.getStores(),e;for(e in d)try{eval("var "+e+" \x3d stores[store].data;")}catch(h){}try{eval("evars \x3d {"+c+"}")}catch(h){}CQ_Analytics.Sitecatalyst.saveEvars();
try{d=[];0<a.length&&(s.linkTrackEvents=s.events=a,d.push("events"));for(var f in c){d.push(f);var g="'"+escape(c[f])+"'";this.setEvar({scVar:f,cqVar:g})}0<d.length&&(s.linkTrackVars=d.join(","));this.trackLink({options:{obj:b}})}finally{CQ_Analytics.Sitecatalyst.restoreEvars()}}},collect:function(b){for(var a=document.getElementsByTagName("*"),c=0;c<a.length;c++)a[c].getAttribute("data-tracking")?this.processDataAttribute(a[c].getAttribute("data-tracking"),b):a[c].getAttribute("record")&&this.processRecordAttribute(a[c].getAttribute("record"),
b)},processRecordAttribute:function(b,a){try{void 0===a&&(a=!0);var c=eval("record("+b+","+a+")");c&&this.storeTrackingData(c)}catch(d){window.console&&window.console.error(d.message)}},processDataAttribute:function(b,a){try{var c=eval("("+b+")");a&&(c.collect=!0);var d=CQ_Analytics.record(c);d&&this.storeTrackingData(d)}catch(e){window.console&&window.console.error(e.message)}},storeTrackingData:function(b){if(CQ_Analytics.DataProvider.hasStore("eventdata")){var a=CQ_Analytics.DataProvider.getItem("eventdata",
"events");a=this.toObj(a.split("\u2026"));var c=b[0];a[c]=c;CQ_Analytics.storeData(b[1]);CQ_Analytics.DataProvider.setItem("eventdata","events",this.toArr(a).join("\u2026"))}else window.console&&window.console.error("EventData Store is missing, unable to set data for analytics.")},toArr:function(b){var a=[];for(property in b)a.push(b[property]);return a},toObj:function(b){for(var a={},c=0;c<b.length;c++){var d=b[c];a[d]=d}return a}};